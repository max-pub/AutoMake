#!/usr/local/bin/node
function LESS(e){var s=fs.readFileSync(e,{encoding:"utf8"});less.render(s,{filename:e,compress:!0},function(s,i){var n=e.replace(".less",".min.css");console.log(e,"->",n),fs.writeFile(n,i.css,"utf-8")})}function JS(e){if(".min.js"!==e.substr(-7)){var s=UglifyJS.minify(e),i=e.replace(".js",".min.js");console.log(i),fs.writeFile(i,s.code,"utf-8")}}function HTML(e){if(".min.html"!==e.substr(-9)){var s=require("html-minifier").minify,i=fs.readFileSync(e,{encoding:"utf8"}),n=s(i,{minifyJS:!0,minifyCSS:!0,removeComments:!0,collapseWhitespace:!0}),r=e.replace(".html",".min.html");console.log(r),fs.writeFile(r,n,"utf-8")}}var fs=require("fs"),less=require("less"),UglifyJS=require("uglify-js");console.log("waiting for changes"),fs.watch("/",{recursive:!0},function(e,s){".less"===s.substr(-5)&&LESS(s),".js"===s.substr(-3)&&JS(s),".html"===s.substr(-5)&&HTML(s)});